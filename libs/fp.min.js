const VERSION="2.0.0",SMID="smidV2";let smConf={channel:"",organization:"",apiHost:"fp-bj.fengkongcloud.com",apiPath:"/v2/web/profile"},randomDeviceId=getDefaultDeviceId(),sdkDefaultConf={key:getOriginWords("%5B%A0%C0%DB%DD%E2%D2%CE"),deviceId:randomDeviceId,timestamp:getOriginWords("%3Eelollnmmnhck")},smResult={sign:"",timestamp:"",deviceId:"",length:0},jsLoaded=+new Date,sessionId=getSessionId();function getSessionId(){let a=+new Date,b=Math.floor(1E8*Math.random());return a+"-"+b}function safeAdd(a,b){let c=(65535&a)+(65535&b);return(a>>16)+(b>>16)+(c>>16)<<16|65535&c}function bitRotateLeft(a,b){return a<<b|a>>>32-b}function md5cmn(c,d,a,b,e,f){return safeAdd(bitRotateLeft(safeAdd(safeAdd(d,c),safeAdd(b,f)),e),a)}function md5ff(e,a,b,c,d,f,g){return md5cmn(a&b|~a&c,e,a,d,f,g)}function md5gg(e,a,b,c,d,f,g){return md5cmn(a&c|b&~c,e,a,d,f,g)}function md5hh(e,a,b,c,d,f,g){return md5cmn(a^b^c,e,a,d,f,g)}function md5ii(e,a,b,c,d,f,g){return md5cmn(b^(a|~c),e,a,d,f,g)}function binlMD5(e,f){e[f>>5]|=128<<f%32,e[(f+64>>>9<<4)+14]=f;let g,h,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(g=0;g<e.length;g+=16)h=m,j=n,k=o,l=p,m=md5ff(m,n,o,p,e[g],7,-680876936),p=md5ff(p,m,n,o,e[g+1],12,-389564586),o=md5ff(o,p,m,n,e[g+2],17,606105819),n=md5ff(n,o,p,m,e[g+3],22,-1044525330),m=md5ff(m,n,o,p,e[g+4],7,-176418897),p=md5ff(p,m,n,o,e[g+5],12,1200080426),o=md5ff(o,p,m,n,e[g+6],17,-1473231341),n=md5ff(n,o,p,m,e[g+7],22,-45705983),m=md5ff(m,n,o,p,e[g+8],7,1770035416),p=md5ff(p,m,n,o,e[g+9],12,-1958414417),o=md5ff(o,p,m,n,e[g+10],17,-42063),n=md5ff(n,o,p,m,e[g+11],22,-1990404162),m=md5ff(m,n,o,p,e[g+12],7,1804603682),p=md5ff(p,m,n,o,e[g+13],12,-40341101),o=md5ff(o,p,m,n,e[g+14],17,-1502002290),n=md5ff(n,o,p,m,e[g+15],22,1236535329),m=md5gg(m,n,o,p,e[g+1],5,-165796510),p=md5gg(p,m,n,o,e[g+6],9,-1069501632),o=md5gg(o,p,m,n,e[g+11],14,643717713),n=md5gg(n,o,p,m,e[g],20,-373897302),m=md5gg(m,n,o,p,e[g+5],5,-701558691),p=md5gg(p,m,n,o,e[g+10],9,38016083),o=md5gg(o,p,m,n,e[g+15],14,-660478335),n=md5gg(n,o,p,m,e[g+4],20,-405537848),m=md5gg(m,n,o,p,e[g+9],5,568446438),p=md5gg(p,m,n,o,e[g+14],9,-1019803690),o=md5gg(o,p,m,n,e[g+3],14,-187363961),n=md5gg(n,o,p,m,e[g+8],20,1163531501),m=md5gg(m,n,o,p,e[g+13],5,-1444681467),p=md5gg(p,m,n,o,e[g+2],9,-51403784),o=md5gg(o,p,m,n,e[g+7],14,1735328473),n=md5gg(n,o,p,m,e[g+12],20,-1926607734),m=md5hh(m,n,o,p,e[g+5],4,-378558),p=md5hh(p,m,n,o,e[g+8],11,-2022574463),o=md5hh(o,p,m,n,e[g+11],16,1839030562),n=md5hh(n,o,p,m,e[g+14],23,-35309556),m=md5hh(m,n,o,p,e[g+1],4,-1530992060),p=md5hh(p,m,n,o,e[g+4],11,1272893353),o=md5hh(o,p,m,n,e[g+7],16,-155497632),n=md5hh(n,o,p,m,e[g+10],23,-1094730640),m=md5hh(m,n,o,p,e[g+13],4,681279174),p=md5hh(p,m,n,o,e[g],11,-358537222),o=md5hh(o,p,m,n,e[g+3],16,-722521979),n=md5hh(n,o,p,m,e[g+6],23,76029189),m=md5hh(m,n,o,p,e[g+9],4,-640364487),p=md5hh(p,m,n,o,e[g+12],11,-421815835),o=md5hh(o,p,m,n,e[g+15],16,530742520),n=md5hh(n,o,p,m,e[g+2],23,-995338651),m=md5ii(m,n,o,p,e[g],6,-198630844),p=md5ii(p,m,n,o,e[g+7],10,1126891415),o=md5ii(o,p,m,n,e[g+14],15,-1416354905),n=md5ii(n,o,p,m,e[g+5],21,-57434055),m=md5ii(m,n,o,p,e[g+12],6,1700485571),p=md5ii(p,m,n,o,e[g+3],10,-1894986606),o=md5ii(o,p,m,n,e[g+10],15,-1051523),n=md5ii(n,o,p,m,e[g+1],21,-2054922799),m=md5ii(m,n,o,p,e[g+8],6,1873313359),p=md5ii(p,m,n,o,e[g+15],10,-30611744),o=md5ii(o,p,m,n,e[g+6],15,-1560198380),n=md5ii(n,o,p,m,e[g+13],21,1309151649),m=md5ii(m,n,o,p,e[g+4],6,-145523070),p=md5ii(p,m,n,o,e[g+11],10,-1120210379),o=md5ii(o,p,m,n,e[g+2],15,718787259),n=md5ii(n,o,p,m,e[g+9],21,-343485551),m=safeAdd(m,h),n=safeAdd(n,j),o=safeAdd(o,k),p=safeAdd(p,l);return[m,n,o,p]}function binl2rstr(a){let b,c="",d=32*a.length;for(b=0;b<d;b+=8)c+=String.fromCharCode(255&a[b>>5]>>>b%32);return c}function rstr2binl(a){let b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;let d=8*a.length;for(b=0;b<d;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function rstrMD5(a){return binl2rstr(binlMD5(rstr2binl(a),8*a.length))}function rstr2hex(a){let b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(15&b>>>4)+d.charAt(15&b);return e}function str2rstrUTF8(a){return unescape(encodeURIComponent(a))}function rawMD5(a){return rstrMD5(str2rstrUTF8(a))}function hexMD5(a){return rstr2hex(rawMD5(a))}function md5(a){return hexMD5(a)}function getOriginWords(a){a=unescape(a);let b=String.fromCharCode,c=b(a.charCodeAt(0)-a.length);for(let d=1;d<a.length;d++)c+=b(a.charCodeAt(d)-c.charCodeAt(d-1));return c}function getDateTime(){let a=new Date,b=a.getFullYear().toString(),c=(a.getMonth()+1).toString(),d=a.getDate().toString(),e=a.getHours().toString(),f=a.getMinutes().toString(),g=a.getSeconds().toString();return c=9>=c?"0"+c:c,d=9>=d?"0"+d:d,e=9>=e?"0"+e:e,f=9>=f?"0"+f:f,g=9>=g?"0"+g:g,b+c+d+e+f+g}function getUid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){let b=0|16*Math.random(),c="x"==a?b:8|3&b;return c.toString(16)})}function getDefaultDeviceId(){let a=getDateTime(),b=getUid(),c=a+md5(b)+"00",d=md5("smsk_web_"+c).substr(0,14);return c+d+0}function getAllInfo(){let a=wx.getSystemInfoSync(),b=+new Date,c=getSmid(),d=a.version;return delete a.version,Object.assign({channel:smConf.channel,deviceId:c,time:b-jsLoaded,sessionId,version:VERSION,weAppVerion:d,res:`${a.screenWidth}_${a.screenHeight}`},a)}function formatJsonpParams(a){let b=[];for(let c in a)if(a.hasOwnProperty(c)){let d=a[c];"object"==typeof a[c]&&(d=JSON.stringify(d)),b.push(c+"="+encodeURIComponent(d))}return b.join("&")}function initConf(a){smConf=Object.assign({},smConf,a)}function getDeviceId(){let a=getMainInfo(),b=formatJsonpParams(a),c=getSmResult(),d=c.sign;return encrypt(d,b)}function getMainInfo(){let a=getSmid(),b=+new Date;return{deviceId:a,time:b-jsLoaded,sid:sessionId,version:VERSION}}function getSmid(){let a;try{const b=`${wx.env.USER_DATA_PATH}/SMFP.txt`,c=wx.getFileSystemManager();a=c.readFileSync(b,"utf8")}catch(a){}try{a=wx.getStorageSync(SMID,null)}catch(a){}return a||(a=randomDeviceId),setSmid(a),a}function setSmid(a){try{const b=`${wx.env.USER_DATA_PATH}/SMFP.txt`,c=wx.getFileSystemManager();wx.setStorageSync(SMID,a)}catch(a){}try{fs.writeFileSync(FILEPATH,a,"utf8")}catch(a){}}function getLocation(){return new Promise(function(a){try{wx.getLocation({altitude:!0,success:function(b){a(b)},fail:function(){a({})}})}catch(b){a({})}})}function getAccelerometer(){return new Promise(function(a){let b=[];try{wx.onAccelerometerChange(function(c){b.push(c),setTimeout(function(){wx.stopAccelerometer()},6e3),a(b)}),setTimeout(function(){a([])},1e3)}catch(b){a([])}})}function getCompass(){return new Promise(function(a){let b=[];try{wx.onCompassChange(function(c){b.push(c.direction),setTimeout(function(){wx.stopCompass()},6e3),a(b)}),setTimeout(function(){a([])},1e3)}catch(b){a([])}})}function getWifiList(){return new Promise(function(a){let b=getAllInfo();try{wx.startWifi({success:function(){"android"==b.platform?wx.getWifiList({success:function(){wx.onGetWifiList(function(b){wx.stopWifi(),a(b.wifiList)}),setTimeout(function(){a([])},1e3)},fail:function(){a([])}}):a([])}})}catch(b){a([])}})}function getBluetoothDevices(){return new Promise(function(a){try{wx.openBluetoothAdapter({success:function(){wx.startBluetoothDevicesDiscovery({success:function(){let b=[],c=[];wx.onBluetoothDeviceFound(function(a){let d=a.devices;for(let e=0;e<d.length;e++)-1==c.indexOf(d[e].deviceId)&&(c.push(d[e].deviceId),b.push({deviceId:d[e].deviceId,name:d[e].name,RSSI:d[e].RSSI}))}),setTimeout(function(){a(b)},2e3)},fail:function(){a([]),closeBluetooth()}})},fail:function(){a([]),closeBluetooth()}})}catch(b){a([])}})}function getScreenBrightness(){return new Promise(function(a){try{wx.getScreenBrightness({success:function(b){a(b.value)},fail:function(){a(-1)}})}catch(b){a(-1)}})}function getNetworkType(){return new Promise(function(a){try{wx.getNetworkType({success:function(b){a(b.networkType)},fail:function(){a("")}})}catch(b){a("")}})}function setSmResult(a,b,c,d){smResult.deviceId=a,smResult.sign=b,smResult.timestamp=c,smResult.length=1*d}function getSmResult(){return{deviceId:smResult.deviceId,sign:smResult.sign,timestamp:smResult.timestamp,length:smResult.length}}function getDefaultResult(){let a=getSmid(),b=sdkDefaultConf.timestamp;return{deviceId:a,sign:null,timestamp:b}}function loadScript(a,b,c){wx.request({url:a,data:b,header:{"content-type":"application/json"},success:function(a){let b={code:1902,detail:{},deviceId:"",message:"\u6570\u636E\u89E3\u6790\u5F02\u5E38",requestId:"",riskLevel:""},d=a.data,e=/smCB\((.*)\)/,f=d.match(e);if(f){let a=f[1];try{c(JSON.parse(a))}catch(a){c(b)}}else c(b)}})}function getEncryptResult(a,b){try{let c=getSmResult(),d=c.timestamp,e=a(b);return base64Encode(e)+d}catch(a){let c=getDefaultResult(),d=c.timestamp,e=smEncrypt(DES,b);return base64Encode(e)+d}}function smEncrypt(a,b,c,d,e,g){return a=a||DES,c=c||sdkDefaultConf.key,d=0==d?0:1,e=2==e?1:0,c+="",0==e?a(c,b,d):a(c,b,d,e,g)}function createDesKeys(a){let b,c,d,e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],f=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],g=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],h=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],j=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],k=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],o=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],p=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],q=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],r=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],s=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],t=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],u=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],i=8<a.length?3:1,v=Array(32*i),w=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],x=0,y=0;for(let m=0;m<i;m++){let m=a.charCodeAt(x++)<<24|a.charCodeAt(x++)<<16|a.charCodeAt(x++)<<8|a.charCodeAt(x++),n=a.charCodeAt(x++)<<24|a.charCodeAt(x++)<<16|a.charCodeAt(x++)<<8|a.charCodeAt(x++);d=252645135&(m>>>4^n),n^=d,m^=d<<4,d=65535&(n>>>-16^m),m^=d,n^=d<<-16,d=858993459&(m>>>2^n),n^=d,m^=d<<2,d=65535&(n>>>-16^m),m^=d,n^=d<<-16,d=1431655765&(m>>>1^n),n^=d,m^=d<<1,d=16711935&(n>>>8^m),m^=d,n^=d<<8,d=1431655765&(m>>>1^n),n^=d,m^=d<<1,d=m<<8|240&n>>>20,m=n<<24|16711680&n<<8|65280&n>>>8|240&n>>>24,n=d;for(let a=0;a<w.length;a++)w[a]?(m=m<<2|m>>>26,n=n<<2|n>>>26):(m=m<<1|m>>>27,n=n<<1|n>>>27),m&=-15,n&=-15,b=e[m>>>28]|f[15&m>>>24]|g[15&m>>>20]|h[15&m>>>16]|j[15&m>>>12]|k[15&m>>>8]|l[15&m>>>4],c=o[n>>>28]|p[15&n>>>24]|q[15&n>>>20]|r[15&n>>>16]|s[15&n>>>12]|t[15&n>>>8]|u[15&n>>>4],d=65535&(c>>>16^b),v[y++]=b^d,v[y++]=c^d<<16}return v}function DES(a,b,c,d,e,f){var g=String.fromCharCode;let h,k,l,n,o,p,q,r,s,t,u,v,w,x,y=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],z=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],A=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],B=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],C=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],D=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],E=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],F=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696],G=createDesKeys(a),H=0,I=b.length,J=0,K=32==G.length?3:9;r=3==K?c?[0,32,2]:[30,-2,-2]:c?[0,32,2,62,30,-2,64,96,2]:[94,62,-2,32,64,2,30,-2,-2],2==f?b+="        ":1==f?(l=8-I%8,b+=g(l,l,l,l,l,l,l,l),8==l&&(I+=8)):!f&&(b+="\0\0\0\0\0\0\0\0");let L="",M="";for(1==d&&(s=e.charCodeAt(H++)<<24|e.charCodeAt(H++)<<16|e.charCodeAt(H++)<<8|e.charCodeAt(H++),u=e.charCodeAt(H++)<<24|e.charCodeAt(H++)<<16|e.charCodeAt(H++)<<8|e.charCodeAt(H++),H=0);H<I;){for(p=b.charCodeAt(H++)<<24|b.charCodeAt(H++)<<16|b.charCodeAt(H++)<<8|b.charCodeAt(H++),q=b.charCodeAt(H++)<<24|b.charCodeAt(H++)<<16|b.charCodeAt(H++)<<8|b.charCodeAt(H++),1==d&&(c?(p^=s,q^=u):(t=s,v=u,s=p,u=q)),l=252645135&(p>>>4^q),q^=l,p^=l<<4,l=65535&(p>>>16^q),q^=l,p^=l<<16,l=858993459&(q>>>2^p),p^=l,q^=l<<2,l=16711935&(q>>>8^p),p^=l,q^=l<<8,l=1431655765&(p>>>1^q),q^=l,p^=l<<1,p=p<<1|p>>>31,q=q<<1|q>>>31,k=0;k<K;k+=3){for(w=r[k+1],x=r[k+2],h=r[k];h!=w;h+=x)n=q^G[h],o=(q>>>4|q<<28)^G[h+1],l=p,p=q,q=l^(z[63&n>>>24]|B[63&n>>>16]|D[63&n>>>8]|F[63&n]|y[63&o>>>24]|A[63&o>>>16]|C[63&o>>>8]|E[63&o]);l=p,p=q,q=l}p=p>>>1|p<<31,q=q>>>1|q<<31,l=1431655765&(p>>>1^q),q^=l,p^=l<<1,l=16711935&(q>>>8^p),p^=l,q^=l<<8,l=858993459&(q>>>2^p),p^=l,q^=l<<2,l=65535&(p>>>16^q),q^=l,p^=l<<16,l=252645135&(p>>>4^q),q^=l,p^=l<<4,1==d&&(c?(s=p,u=q):(p^=t,q^=v)),M+=g(p>>>24,255&p>>>16,255&p>>>8,255&p,q>>>24,255&q>>>16,255&q>>>8,255&q),J+=8,512==J&&(L+=M,M="",J=0)}return L+M}function base64Encode(a){let b,c,d,e,f,g,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(d=a.length,c=0,b="";c<d;){if(e=255&a.charCodeAt(c++),c==d){b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4),b+="==";break}if(f=a.charCodeAt(c++),c==d){b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4|(240&f)>>4),b+=h.charAt((15&f)<<2),b+="=";break}g=a.charCodeAt(c++),b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4|(240&f)>>4),b+=h.charAt((15&f)<<2|(192&g)>>6),b+=h.charAt(63&g)}return b}function base64Decode(a){var b=String.fromCharCode;let c,d,e,f,g,h,j,k=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];for(h=a.length,g=0,j="";g<h;){do c=k[255&a.charCodeAt(g++)];while(g<h&&-1==c);if(-1==c)break;do d=k[255&a.charCodeAt(g++)];while(g<h&&-1==d);if(-1==d)break;j+=b(c<<2|(48&d)>>4);do{if(e=255&a.charCodeAt(g++),61==e)return j;e=k[e]}while(g<h&&-1==e);if(-1==e)break;j+=b((15&d)<<4|(60&e)>>2);do{if(f=255&a.charCodeAt(g++),61==f)return j;f=k[f]}while(g<h&&-1==f);if(-1==f)break;j+=b((3&e)<<6|f)}return j}function getDefaultResult(){let a=getSmid(),b=sdkDefaultConf.timestamp;return{deviceId:a,sign:null,timestamp:b}}function setSmResult(a,b,c,d){smResult.deviceId=a,smResult.sign=b,smResult.timestamp=c,smResult.length=1*d}function getSmResult(){return{deviceId:smResult.deviceId,sign:smResult.sign,timestamp:smResult.timestamp,length:smResult.length}}function encrypt(a,b){let c="W",d=getSmResult(),e=d.length;try{let d=smEncrypt(DES,base64Decode(a),"",0),f=d.substr(0,e).split(","),g=formatEncryptFunc(f[0]),h=null;return"function"==typeof g&&(h=function(a){return smEncrypt(g,a,f[2],f[1],f[3])}),c+getEncryptResult(h,b)}catch(a){return c+getEncryptResult(DES,b)}}function formatEncryptFunc(a){let b=[null,DES];return b[a]?b[a]:null}function sendFpData(a){let b=formatJsonpParams(a),c="https://"+smConf.apiHost+smConf.apiPath,d=getDefaultResult();setSmResult(d.deviceId,d.sign,d.timestamp,0),loadScript(c,{organization:smConf.organization,smdata:encrypt(d.sign,b),os:"weapp",version:VERSION},function(a){if(1100==a.code){let b=a.deviceId,c=a.detail?a.detail.timestamp:"",d=a.detail?a.detail.sign:"",e=a.detail?a.detail.len:0;b&&d&&c&&e&&(setSmid(b),setSmResult(b,d,c,e))}})}function closeBluetooth(){try{wx.stopBluetoothDevicesDiscovery(),wx.closeBluetoothAdapter()}catch(a){}}function signalFilter(a,c){return a.sort(function(d,a){return 0>d[c]-a[c]}).slice(0,10)}setTimeout(function(){let a=getAllInfo();sendFpData(a),wx.startAccelerometer&&wx.startAccelerometer(),wx.startCompass&&wx.startCompass()},0);let uploadTimes=0,intervalTimer=setInterval(function(){try{let a=smConf.authConf&&!0==smConf.authConf.location;if(3>uploadTimes){let b=getAllInfo(),c=[getAccelerometer(),getCompass(),getScreenBrightness(),getNetworkType(),getWifiList(),getBluetoothDevices()];a&&c.push(getLocation()),Promise.all(c).then(function(c){let d={accelerometer:c[0],compass:c[1],screenBright:c[2],networkType:c[3],wifiList:signalFilter(c[4],"signalStrength"),bluetooth:signalFilter(c[5],"RSSI")},e=Object.assign(b,d);a&&(d.location=c[6]),sendFpData(e)})}else clearInterval(intervalTimer);uploadTimes++}catch(a){}},2e3);module.exports={initConf,getDeviceId};